<div class="login-container">
  <div class="login-bg"></div>

  <div class="language-selector">
    <div class="d-inline-block ml-3" ngbDropdown>
      <button id="language-dropdown" class="btn btn-sm btn-transparent" ngbDropdownToggle>
        {{ currentLanguage }}
      </button>
      <div ngbDropdownMenu aria-labelledby="language-dropdown">
        <button class="dropdown-item" *ngFor="let language of languages" (click)="setLanguage(language)">
          {{ language }}
        </button>
      </div>
    </div>
  </div>

  <div class="login-box">
    <div class="container">
      <div class="card col-lg-6 col-sm-12 col-xs-12 mx-auto">
        <div class="card-body">
          <h4 class="card-title text-center" *ngIf="!createNewAccount">
            <i class="fa-5x fas fa-user-circle"></i>
          </h4>

          <form (ngSubmit)="login()" [formGroup]="loginForm" *ngIf="!createNewAccount" novalidate>
            <div class="alert alert-danger" [hidden]="!error || isLoading" translate>
              Username or password incorrect.
            </div>
            <div class="form-group">
              <label class="d-block">
                <input
                  type="text"
                  class="form-control"
                  formControlName="username"
                  autocomplete="username"
                  [placeholder]="'Username' | translate"
                />
                <span hidden translate>Username</span>
                <small
                  [hidden]="loginForm.controls.username.valid || loginForm.controls.username.untouched"
                  class="text-danger"
                  translate
                >
                  Username is required
                </small>
              </label>

              <label class="d-block">
                <input
                  type="password"
                  class="form-control"
                  formControlName="password"
                  autocomplete="current-password"
                  [placeholder]="'Password' | translate"
                  required
                />
                <span hidden translate>Password</span>
                <small
                  [hidden]="loginForm.controls.password.valid || loginForm.controls.password.untouched"
                  class="text-danger"
                  translate
                >
                  Password is required
                </small>
              </label>

              <div class="form-check">
                <label class="form-check-label">
                  <input type="checkbox" class="form-check-input" formControlName="remember" />
                  <span translate>Remember me</span>
                </label>
              </div>
            </div>
            <button class="btn btn-primary w-100" type="submit" [disabled]="loginForm.invalid || isLoading">
              <i class="fas fa-cog fa-spin" [hidden]="!isLoading"></i>
              <span translate>Login</span>
            </button>
          </form>

          <form *ngIf="createNewAccount" (ngSubmit)="login()" [formGroup]="createAccountForm" novalidate>
            <div class="alert alert-danger" [hidden]="!error || isLoading" translate>
              Username or password incorrect.
            </div>
            <div class="form-group">
              <label class="d-block">
                <input
                  type="email"
                  email="true"
                  class="form-control"
                  formControlName="email"
                  [placeholder]="'E-Mail' | translate"
                />
                <span hidden translate>E-Mail</span>
                <small
                  [hidden]="createAccountForm.controls.email.valid || createAccountForm.controls.email.untouched"
                  class="text-danger"
                  translate
                >
                  Valid E-Mail is required
                </small>
              </label>

              <label class="d-block">
                <input
                  type="text"
                  class="form-control"
                  formControlName="username"
                  autocomplete="username"
                  [placeholder]="'Username' | translate"
                />
                <span hidden translate>Username</span>
                <small
                  [hidden]="createAccountForm.controls.username.valid || createAccountForm.controls.username.untouched"
                  class="text-danger"
                  translate
                >
                  Username is required
                </small>
              </label>

              <label class="d-block">
                <input
                  type="password"
                  class="form-control"
                  formControlName="password"
                  autocomplete="current-password"
                  [placeholder]="'Password' | translate"
                  required
                />
                <span hidden translate>Password</span>
                <small
                  [hidden]="createAccountForm.controls.password.valid || createAccountForm.controls.password.untouched"
                  class="text-danger"
                  translate
                >
                  Password is required
                </small>
              </label>

              <label class="d-block">
                <input
                  type="password"
                  class="form-control"
                  formControlName="repeatPassword"
                  [placeholder]="'Repeat your Password' | translate"
                  required
                />
                <span hidden translate>Repeat your Password</span>
                <small
                  [hidden]="
                    createAccountForm.controls.repeatPassword.valid ||
                    createAccountForm.controls.repeatPassword.untouched
                  "
                  class="text-danger"
                  translate
                >
                  {{
                    createAccountForm.controls.repeatPassword.untouched ||
                    createAccountForm.controls.repeatPassword.value == ''
                      ? 'Repeat Password is required'
                      : 'Password does not match'
                  }}
                </small>
              </label>

              <div class="form-check">
                <label class="form-check-label">
                  <input type="checkbox" class="form-check-input" formControlName="remember" />
                  <span translate>Remember me</span>
                </label>
              </div>
            </div>
            <button class="btn btn-primary w-100" type="submit" [disabled]="createAccountForm.invalid || isLoading">
              <i class="fas fa-cog fa-spin" [hidden]="!isLoading"></i>
              <span translate>Create your account</span>
            </button>
          </form>

          <div style="text-align: right;">
            <button class="btn btn-sm btn-transparent no-padding" (click)="toggleCreateNewAccount()">
              <span translate>{{ createNewAccount ? 'Login' : 'Create your account' }}</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
